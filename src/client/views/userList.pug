html 
  head 
    meta(charset="utf-8")
    title Список пользователей
    link(rel="icon" type="image/svg" sizes="512x512" href="/favicon/favicon.svg")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" crossorigin="anonymous")
    link(rel="stylesheet" href="/css/styles.css")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css")
  body 
    .container.p-4
      .row.justify-content-center
        .col-12.col-xl-8
          h1 Пользователи кошачей сети
          each user in users
            .user-card
              .user-avatar
                img(src=user.profile.avatar, alt="Avatar")
              
              .user-info
                h5= user.profile.name + ' ' + user.profile.surname
                p Email: #{user.profile.email}
                p Дата рождения: #{user.profile.birthDate}
                .d-flex.gap-2
                  span.badge.bg-secondary= user.role
                  span.badge(class={
                    'bg-success': user.status === 'active',
                    'bg-warning': user.status === 'pending', 
                    'bg-danger': user.status === 'blocked'
                  })= user.status
              
              .user-actions
                button.btn.btn-primary.btn-sm(
                  onclick=`document.getElementById('userDialog${user.id}').showModal()`
                ) Редактировать
                
                a.btn.btn-outline-primary.btn-sm(href=`/users/${user.id}/friends`)
                  i.fas.fa-users.me-1
                  | Друзья

                a.btn.btn-outline-primary.btn-sm(href=`/users/${user.id}/posts`)
                  i.fas.fa-navicon.me-1
                  | Новости

            dialog(id=`userDialog${user.id}`)
              form(method="POST" action=`/users/${user.id}`)
                input(type="text" name="userName" value=`${user.profile.name}` required)
                input(type="text" name="userSurname" value=`${user.profile.surname}` required)
                input(type="text" name="userEmail" value=`${user.profile.email}` required pattern="[^@\\s]+@[^@\\s]+\\.[^@\\s]+")
                input(type="text" name="userBirthDate" value=`${user.profile.birthDate}` required pattern="[0-3][0-9]\\.[0-1][0-9]\\.[12][0-9][0-9][0-9]")

                select(name="userRole" required)
                  option(value="user" selected=user.role === 'user') Пользователь
                  option(value="admin" selected=user.role === 'admin') Администратор
                select(name="userStatus" required)
                  option(value="pending" selected=user.status === 'pending') Не подтверждён
                  option(value="active" selected=user.status === 'active') Активный
                  option(value="blocked" selected=user.status === 'blocked') Заблокирован
                button.btn.btn-primary.btn-sm(type="submit") Сохранить
                button.btn.btn-primary.btn-sm(type="button" onclick=`document.getElementById('userDialog${user.id}').close()`) Отмена